# Module4: 動作の確認

## 1. 実機の接続

カメラを使用した動作を確認するためにPCに実機を接続します。

### Android

まず、実機を開発者モードに切り替えます。端末により異なりますが、設定から端末情報内の「ビルド番号」を数回タップすることで開発者モードに切り替わるケースが多いようです。また、開発者向けオプションで「USBデバッグ」をオンに設定してください。

つぎに、モバイル端末とWindowsをUSBケーブルで接続します。するとVisual Studioの実行のドロップダウンリストに接続したモバイル端末の機種名が表示されます。選択して実行すると、アプリがモバイル端末に配置されデバッグを開始できます。

### iOS

#### MacでXamarinをインストールする

Xamarinは、Visual Studio for Macのインストール時に一緒にインストールされます。XcodeがMacにインストールされた状態で次のページからVisual Studio for Macのインストーラをダウンロードし、Visual Studio for Macをインストールしてください

#### Macでリモートログイン設定を有効にする

システム環境設定の**共有**で**リモートログイン**にチェックを入れます。**すべてのユーザ**か、Windowsからアクセスするユーザがリストに含まれた状態で**次のユーザのみ**にチェックを入れます。

#### WindowsからMacに接続する

Visual Studioの**ツール**で**iOS** -> **Xamarin Mac Agent**を選択します。

**Add Server**をクリックして同一ネットワーク内に存在する接続先Mac（リモートログイン設定したもの）を選択し、サーバー名かIPアドレスを入力します。そして接続するサーバーをクリックし、ユーザー名とパスワードを入力します。接続に成功すると、サーバーの横に鎖マークが表示されます。

#### MacからXcodeを使ってiPhone実機にBundle Identifierを登録する

Macへの接続とXcodeを使った設定も必要です。

まず、Xcodeで新規アプリを**Single View Application**などを指定して作成します。なんでもかまいません。

つぎに、Bundle Identifierを設定します。Product NameとOrganization Identifierを入力してください。ここで設定したものをデバッグ対象のiOSプロジェクで使用します。

この状態でモバイル端末をUSBケーブルでMacに接続し、デバッグ実行してください。

#### WindowsからiOSプロジェクトのバンドル識別子を設定する

Visual StudioでiOSプロジェクトのinfo.plistを開き、先ほどXcodeで設定したBundle Identifierを「バンドル識別子」に入力します。

この状態でMacに接続すると、Visual Studioの実行のドロップダウンリストに、接続したモバイル端末の機種名が表示されます。選択して実行すると、アプリがモバイル端末に配置されデバッグを開始できます。


## 2. アプリへのアクセス許可

起動したアプリでカメラ機能を使用するためにはアプリ操作時にも使用の許可が必要です。

アプリ初回実行時にカメラやメディアライブラリへの許可が求められたらOKを選択してください。

![](./images/4/permission.png)

---
[Back](module3.md) | [Next](module5.md)